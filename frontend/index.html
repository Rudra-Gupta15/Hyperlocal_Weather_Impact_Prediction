<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes" />
  <meta name="description" content="Weather ML Dashboard - Live weather data with AI-powered predictions. Created by Rudra Kumar Gupta" />
  <meta name="theme-color" content="#1a2332" />
  <title>Weather ML Dashboard - Rudra Kumar Gupta</title>
  <link rel="stylesheet" href="style.css" />
</head>

<body>
  <div class="app">
    <!-- Slim Sidebar -->
    <aside class="sidebar">
      <a href="https://rudraportfolio-five.vercel.app/" target="_blank" rel="noopener noreferrer" class="logo" title="Visit Portfolio">
        <img src="logo_v2.png" alt="RG" class="logo-img">
      </a>

      <nav class="nav">
        <button class="nav-btn active" data-view="weather" title="Weather">
          <svg width="24" height="24" fill="currentColor" viewBox="0 0 24 24">
            <path d="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z" />
          </svg>
        </button>
        <button class="nav-btn" data-view="cities" title="Cities">
          <svg width="24" height="24" fill="currentColor" viewBox="0 0 24 24">
            <path d="M15.5 1h-8C6.12 1 5 2.12 5 3.5v17C5 21.88 6.12 23 7.5 23h8c1.38 0 2.5-1.12 2.5-2.5v-17C18 2.12 16.88 1 15.5 1zm-4 21c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2zm4.5-4H7V4h8.5v14z" />
          </svg>
        </button>
        <button class="nav-btn" data-view="map" title="Map">
          <svg width="24" height="24" fill="currentColor" viewBox="0 0 24 24">
            <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm3.5-9c.83 0 1.5-.67 1.5-1.5S16.33 8 15.5 8 14 8.67 14 9.5s.67 1.5 1.5 1.5zm-7 0c.83 0 1.5-.67 1.5-1.5S9.33 8 8.5 8 7 8.67 7 9.5 7.67 11 8.5 11zm3.5 6.5c2.33 0 4.31-1.46 5.11-3.5H6.89c.8 2.04 2.78 3.5 5.11 3.5z" />
          </svg>
        </button>
        <button class="nav-btn" data-view="analytics" title="Analytics">
          <svg width="24" height="24" fill="currentColor" viewBox="0 0 24 24">
            <path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM9 17H7v-7h2v7zm4 0h-2V7h2v10zm4 0h-2v-4h2v4z" />
          </svg>
        </button>
        <button class="nav-btn" data-view="settings" title="Settings">
          <svg width="24" height="24" fill="currentColor" viewBox="0 0 24 24">
            <path d="M19.14 12.94c.04-.3.06-.61.06-.94 0-.32-.02-.64-.07-.94l2.03-1.58c.18-.14.23-.41.12-.61l-1.92-3.32c-.12-.22-.37-.29-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54c-.04-.24-.24-.41-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.05.3-.09.63-.09.94s.02.64.07.94l-2.03 1.58c-.18.14-.23.41-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61l-2.01-1.58zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6z" />
          </svg>
        </button>
      </nav>
    </aside>

    <!-- Main Content -->
    <main class="content">
      <div class="search-container">
        <input type="text" id="citySearch" class="search-input" placeholder="Search for cities..." />
        <div id="cityDropdown" class="city-dropdown hidden"></div>
      </div>

      <section class="weather-hero">
        <div class="hero-left">
          <h1 id="cityName">Madrid</h1>
          <p id="lastUpdated" class="timestamp"></p>
          <div class="temp-display">
            <h2 id="mainTemp">31Â°</h2>
          </div>
        </div>

        <div class="hero-center">
          <div class="cloud-container">
            <div class="cloud-puff puff-1"></div>
            <div class="cloud-puff puff-2"></div>
            <div class="cloud-puff puff-3"></div>
          </div>
          <div id="mainWeatherIcon" class="large-icon">â˜€ï¸</div>
        </div>
      </section>

      <!-- Today's Forecast -->
      <div class="forecast-card">
        <h3>TODAY'S FORECAST</h3>
        <div id="hourlyForecast" class="hourly-forecast"></div>
      </div>

      <!-- Air Conditions -->
      <div class="air-conditions-card">
        <h3>AIR CONDITIONS</h3>
        <div class="conditions-grid">
          <div class="condition-item">
            <div class="condition-icon">ğŸŒ¡ï¸</div>
            <div class="condition-data">
              <p class="condition-label">Real Feel</p>
              <p id="feelsLike" class="condition-value">30Â°</p>
            </div>
          </div>
          <div class="condition-item">
            <div class="condition-icon">ğŸ’¨</div>
            <div class="condition-data">
              <p class="condition-label">Wind</p>
              <p id="windSpeed" class="condition-value">0.8 km/h</p>
            </div>
          </div>
          <div class="condition-item">
            <div class="condition-icon">ğŸ’§</div>
            <div class="condition-data">
              <p class="condition-label">Humidity</p>
              <p id="humidity" class="condition-value">--%</p>
            </div>
          </div>
          <div class="condition-item">
            <div class="condition-icon">ğŸŒ§ï¸</div>
            <div class="condition-data">
              <p class="condition-label">Chance of rain</p>
              <p id="rainChance" class="condition-value">0%</p>
            </div>
          </div>
          <div class="condition-item">
            <div class="condition-icon">â˜ï¸</div>
            <div class="condition-data">
              <p class="condition-label">Clouds</p>
              <p id="clouds" class="condition-value">--%</p>
            </div>
          </div>
          <div class="condition-item">
            <div class="condition-icon">ğŸ“‰</div>
            <div class="condition-data">
              <p class="condition-label">Pressure</p>
              <p id="pressure" class="condition-value">-- hPa</p>
            </div>
          </div>
        </div>
      </div>

      <!-- Right Sidebar Forecast (Inside Grid) -->
      <div class="week-forecast">
        <h3>7-DAY FORECAST</h3>
        <div id="weeklyForecast" class="weekly-list"></div>
      </div>

      <!-- ML Performance -->
      <div class="models-card">
        <h3>ğŸ“Š ML MODELS PERFORMANCE</h3>
        <div id="modelCards" class="model-cards"></div>
      </div>

      <!-- Analytics Overview - FIXED IMAGE PATH -->
      <div class="graph-card">
        <h3>ğŸ“ˆ ANALYTICS OVERVIEW</h3>
        <div class="graph-container">
          <!-- Image is in frontend/public/images/ folder -->
          <img src="public/images/model_comparison.png" alt="Model Predictions vs Actual" 
               onerror="this.src='images/model_comparison.png'; this.onerror=function(){this.src='model_comparison.png'; this.onerror=function(){this.style.display='none'; this.parentElement.innerHTML='<p style=\'text-align:center; color:var(--text-secondary); padding:40px;\'>ğŸ“Š Analytics chart will appear here once image is uploaded<br><small>Expected location: public/images/model_comparison.png</small></p>';};};" />
        </div>
      </div>

      <div class="footer-credit">
        <p>Created by <strong>Rudra Kumar Gupta</strong> |
          <a href="https://rudraportfolio-five.vercel.app/" target="_blank" rel="noopener noreferrer">Portfolio</a>
        </p>
      </div>
    </main>

    <!-- Modals -->
    <div id="citiesModal" class="modal hidden">
      <div class="modal-content">
        <button class="modal-close">&times;</button>
        <h2>Select City</h2>
        <div id="citiesList" class="cities-list"></div>
      </div>
    </div>
    <div id="mapModal" class="modal hidden">
      <div class="modal-content">
        <button class="modal-close">&times;</button>
        <h2>Weather Map</h2>
        <div id="mapCity"></div>
        <p>Coming Soon...</p>
      </div>
    </div>
    <div id="analyticsModal" class="modal hidden">
      <div class="modal-content modal-large">
        <button class="modal-close">&times;</button>
        <h2>ğŸ“Š Analytics Dashboard</h2>
        
        <div class="analytics-grid">
          <div class="analytics-card">
            <h4>ğŸ¯ Model Performance</h4>
            <div id="modelPerformanceChart" class="chart-container">
              <canvas id="performanceChart"></canvas>
            </div>
          </div>
          
          <div class="analytics-card">
            <h4>ğŸ“ˆ Accuracy Metrics</h4>
            <div class="metrics-list">
              <div class="metric-item">
                <span class="metric-label">Average MAE</span>
                <span class="metric-value" id="avgMAE">0.764Â°C</span>
              </div>
              <div class="metric-item">
                <span class="metric-label">Average RMSE</span>
                <span class="metric-value" id="avgRMSE">0.990Â°C</span>
              </div>
              <div class="metric-item">
                <span class="metric-label">Average RÂ²</span>
                <span class="metric-value" id="avgR2">0.9627</span>
              </div>
              <div class="metric-item">
                <span class="metric-label">Predictions Made</span>
                <span class="metric-value" id="predictionCount">1,247</span>
              </div>
            </div>
          </div>
          
          <div class="analytics-card full-width">
            <h4>ğŸ”¬ Model Comparison</h4>
            <div class="comparison-table">
              <table class="data-table">
                <thead>
                  <tr>
                    <th>Model</th>
                    <th>MAE (Â°C)</th>
                    <th>RMSE (Â°C)</th>
                    <th>RÂ² Score</th>
                    <th>Status</th>
                  </tr>
                </thead>
                <tbody id="modelComparisonTable">
                  <tr>
                    <td>Linear Regression</td>
                    <td>0.280</td>
                    <td>0.340</td>
                    <td>0.9981</td>
                    <td><span class="badge badge-success">Excellent</span></td>
                  </tr>
                  <tr>
                    <td>Random Forest</td>
                    <td>1.233</td>
                    <td>1.639</td>
                    <td>0.9556</td>
                    <td><span class="badge badge-warning">Good</span></td>
                  </tr>
                  <tr>
                    <td>Gradient Boosting</td>
                    <td>0.780</td>
                    <td>0.990</td>
                    <td>0.9345</td>
                    <td><span class="badge badge-info">Very Good</span></td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>
          
          <div class="analytics-card full-width">
            <h4>ğŸ“Š Training History</h4>
            <div class="training-info">
              <div class="info-item">
                <span class="info-icon">ğŸ—“ï¸</span>
                <div>
                  <p class="info-label">Last Training</p>
                  <p class="info-value">January 28, 2026</p>
                </div>
              </div>
              <div class="info-item">
                <span class="info-icon">ğŸ“¦</span>
                <div>
                  <p class="info-label">Dataset Size</p>
                  <p class="info-value">10,000+ records</p>
                </div>
              </div>
              <div class="info-item">
                <span class="info-icon">â±ï¸</span>
                <div>
                  <p class="info-label">Training Time</p>
                  <p class="info-value">45 minutes</p>
                </div>
              </div>
              <div class="info-item">
                <span class="info-icon">âœ…</span>
                <div>
                  <p class="info-label">Model Status</p>
                  <p class="info-value">Production Ready</p>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div id="settingsModal" class="modal hidden">
      <div class="modal-content">
        <button class="modal-close">&times;</button>
        <h2>Settings</h2>
        
        <div class="settings-section">
          <h3>ğŸ¨ Appearance</h3>
          <div class="setting-item">
            <div class="setting-info">
              <label for="darkMode">Dark Mode</label>
              <p class="setting-description">Toggle dark/light theme</p>
            </div>
            <label class="toggle-switch">
              <input type="checkbox" id="darkMode" checked>
              <span class="toggle-slider"></span>
            </label>
          </div>
          
          <div class="setting-item">
            <div class="setting-info">
              <label for="animations">Animations</label>
              <p class="setting-description">Enable smooth animations</p>
            </div>
            <label class="toggle-switch">
              <input type="checkbox" id="animations" checked>
              <span class="toggle-slider"></span>
            </label>
          </div>
        </div>

        <div class="settings-section">
          <h3>ğŸŒ¡ï¸ Units</h3>
          <div class="setting-item">
            <div class="setting-info">
              <label for="tempUnit">Temperature Unit</label>
              <p class="setting-description">Choose Celsius or Fahrenheit</p>
            </div>
            <select id="tempUnit" class="setting-select">
              <option value="metric">Celsius (Â°C)</option>
              <option value="imperial">Fahrenheit (Â°F)</option>
            </select>
          </div>
          
          <div class="setting-item">
            <div class="setting-info">
              <label for="windUnit">Wind Speed Unit</label>
              <p class="setting-description">Choose your preferred unit</p>
            </div>
            <select id="windUnit" class="setting-select">
              <option value="kmh">Kilometers/hour</option>
              <option value="mph">Miles/hour</option>
              <option value="ms">Meters/second</option>
            </select>
          </div>
        </div>

        <div class="settings-section">
          <h3>ğŸ”” Notifications</h3>
          <div class="setting-item">
            <div class="setting-info">
              <label for="weatherAlerts">Weather Alerts</label>
              <p class="setting-description">Get notified about severe weather</p>
            </div>
            <label class="toggle-switch">
              <input type="checkbox" id="weatherAlerts">
              <span class="toggle-slider"></span>
            </label>
          </div>
          
          <div class="setting-item">
            <div class="setting-info">
              <label for="autoRefresh">Auto Refresh</label>
              <p class="setting-description">Update weather automatically</p>
            </div>
            <label class="toggle-switch">
              <input type="checkbox" id="autoRefresh" checked>
              <span class="toggle-slider"></span>
            </label>
          </div>
        </div>

        <div class="settings-actions">
          <button class="btn-secondary" onclick="resetSettings()">Reset to Default</button>
          <button class="btn-primary" onclick="saveSettings()">Save Settings</button>
        </div>
      </div>
    </div>
  </div>

  <script src="script.js"></script>
</body>
</html>